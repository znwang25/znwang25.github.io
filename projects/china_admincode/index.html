<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Zenan Wang&#39;s Site | Scraping Tool for Records of Chinese Administrative Areas</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <link rel="stylesheet" href="../../css/style.css">
    
    <script async defer src="https://buttons.github.io/buttons.js"></script>
  </head>
  <body>
      <div class="navigation-wrapper">
        <div class="site-name">
                
            </div>
        <div class="top-navigation">
            <nav role="navigation" id="site-nav" class="nav">
                <ul>
                    <li><a href="../../">Home</a></il>
                        
                        <li><a href="../../research/">Research</a></il>
                        
                        <li><a href="../../teaching/">Teaching</a></il>
                        
                        <li><a href="../../projects/">Projects</a></il>
                        
                </ul>
            </nav>
        </div>
    </div>
 
    <div class="wrapper">
      <header class="left_col">
		
    
    <div class="profile_photo">
        
			<img src="../../img/profile.jpg" alt="Logo" />
        
    </div>
    
    <br>

    <div class="author_bio">
      
      <h2> Zenan Wang, Ph.D. </h2>
    
        
        <p>Research Scientist at JD Silicon Valley Lab</p>
        
    </div>

        <div class="compact-sidebar">
		
        <p>
          <i class="far fa-envelope"></i>
          <a id='email' target="_blank" style="display:none;">
              majnat25@tznvy.pbz
          </a>
            <script>
    var email = document.getElementById("email").textContent;
    document.write("<n uers=\"znvygb:".concat(email,"\">").replace(/[a-zA-Z]/g, function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt(0)+13)?c:c-26);}));
</script>
<script>
    var email = document.getElementById("email").textContent;
    var ind_at = email.indexOf("@");
    var new_text = email.slice(0,ind_at).replace(/[a-zA-Z]/g, function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt(0)+13)?c:c-26);}).concat("<span style=\"display: none;\">tsuki</span>")
    document.write(new_text);
    dam = '';
        twig = '253430';
        for (var i = 0; i < twig.length; i+=2) {
            dam += String.fromCharCode(parseInt(twig.substr(i, 2), 16))
        }
        document.write(decodeURIComponent(dam));
</script><noscript>
    <img src="icons/at-sign.svg" class="octicons">
</noscript><script>
    var email = document.getElementById("email").textContent;
    var ind_at = email.indexOf("@");
    var new_text = email.slice(ind_at+1).replace(/[a-zA-Z]/g, function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt(0)+13)?c:c-26);}).concat("<span style=\"display: none;\">eatthisspammer!</span>")
    document.write(new_text);
</script>

        </p>
		

        
        
        
        <p>
            <i class="fab fa-github"></i>
            <a href="https://github.com/znwang25/" target="_blank">
                Github
            </a>
          </p>
        
        
        <p>
            <i class="fab fa-linkedin"></i>
            <a href="https://www.linkedin.com/in/zenan-wang-4886b858/" target="_blank">
                LinkedIn
            </a>
          </p>
        
        </div>
		
		<hr/>
        
      </header>

<section>
    <h1 id="scraping-records-of-chinese-administrative-areas-2009-2017">Scraping Records of Chinese Administrative Areas （2009-2017）</h1>
<p>






    
    
    
    








<a 
class="github-button" 
href="https://github.com/znwang25/china_admincode"
data-icon="octicon-mark-github"
aria-label="View znwang25/china_admincode on GitHub"
 


>
china_admincode
</a>







    
    
    
    








<a 
class="github-button" 
href="https://github.com/znwang25/china_admincode/"
data-icon="octicon-star"
aria-label="Star znwang25/china_admincode on GitHub"
 data-show-count="true" 


>
Star
</a></p>
<p>(爬虫扒取中国乡镇区划代码历史数据 2009 - 2017)</p>
<p>All chinese administrative units have a unique identifier, aka <em>gbcode</em>. Those identifiers are widely used in almost all chinese applications. However, each year some of the gbcode will be changed due to changes in administrative units (name change, boundary change, jurisdiction change etc.). This project aims to preserve the historical record of the gbcode by scraping gbcode for all township and above units from National Bureau of Statistics of the PRC website. The default setting is to scrape all the information from year 2009 to 2017. You can change this range in <code>stats.py</code>.</p>
<p>The resulting output will have following variables:</p>
<ul>
<li>year</li>
<li>prov_name</li>
<li>city_name</li>
<li>city_code</li>
<li>county_name</li>
<li>county_code</li>
<li>town_name</li>
<li>town_code</li>
</ul>
<h3 id="usage">Usage</h3>
<p>The only required package is <code>scrapy</code>. In the project folder, run following command:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">python</span> <span class="n">crawl</span><span class="o">.</span><span class="n">py</span>
</code></pre></div><p>Default csv output path is <code>CSV_FILE_PATH = &quot;./admin_code.csv&quot;</code>.
You can change this in the <code>settings.py</code></p>
<h3 id="download-scraped-data-here">Download scraped data here</h3>
<p><a href="https://raw.githubusercontent.com/znwang25/china_admincode/master/data/admin_code_18_09.csv">Scraped in 2018</a></p>

</section>
<footer>
    <p><small>Copyright © 2010-2021 Zenan Wang, Ph.D.<br/>Last updated on May 26, 2021</small></p>
</footer>
</div>
<script src="../../js/scale.fix.js"></script>
<script src="../../js/jquery-3.3.1.min.js"></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-139382545-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</body>
</html>

